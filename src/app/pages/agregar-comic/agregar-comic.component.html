<div class="container" style="margin: 20px;">

  <h2>Agregar Comic</h2>

  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card-body">

        <form [formGroup]="comicForm" (ngSubmit)="onSubmit()">

          <div class="form-group">
            <label for="titulo">Título</label>
            <input type="text" class="form-control" formControlName="titulo" />
            @if (enviado && myForm['titulo'].errors?.['required']) {
              <div style="color: red;">
                Este campo es obligatorio
              </div>
            }
          </div>

          <br>

          <div class="form-group">
            <label for="genero">Género</label>
            <select class="custom-select form-control" (change)="actualizarGenero($event)" formControlName="genero">
              <option value="">Seleccionar un género...</option>
              @for (genero of comicGenero; track genero) {
                <option [value]="genero">{{ genero }}</option>
              }
            </select>
            @if (enviado && myForm['genero'].errors?.['required']) {
              <div style="color: red;">
                Debes seleccionar un género
              </div>
            }
          </div>

          <br />

          <div class="form-group">
            <label for="editorial">Editorial</label>
            <input type="text" class="form-control" formControlName="editorial" />
            @if (enviado && myForm['editorial'].errors?.['required']) {
              <div style="color: red;">
                Este campo es obligatorio
              </div>
            }
          </div>

          <br>

          <div class="form-group">
            <label for="anio">Año de publicación</label>
            <input type="text" class="form-control" formControlName="anio" />
            @if (enviado && myForm['anio'].errors?.['required']) {
              <div style="color: red;">
                Este campo es obligatorio
              </div>
            }
            @if (enviado && myForm['anio'].errors?.['pattern']) {
              <div style="color: red;">
                Solo se permiten números (Ejemplo: 2025)
              </div>
            }
          </div>

          <br>

          <div class="form-group">
            <label for="autor">Autor</label>
            <input type="text" class="form-control" formControlName="autor" />
            @if (enviado && myForm['autor'].errors?.['required']) {
              <div style="color: red;">
                Este campo es obligatorio
              </div>
            }
          </div>

          <br>

          <div class="form-group">
            <label for="imagenUrl">URL de la imagen</label>
            <input type="text" class="form-control" formControlName="imagenUrl" placeholder="Pega aquí el enlace de la imagen" />
            @if (enviado && myForm['imagenUrl'].errors?.['required']) {
              <div style="color: red;">
                Este campo es obligatorio
              </div>
            }
            @if (enviado && myForm['imagenUrl'].errors?.['pattern']) {
              <div style="color: red;">
                Por favor ingresa una URL válida
              </div>
            }

            @if (comicForm.get('imagenUrl')?.value) {
              <div style="margin-top: 10px;">
                <img src="{{comicForm.get('imagenUrl')?.value}}" alt="Imagen del cómic" style="max-width: 600px; max-height: 600px; width: 100%; height: auto;" />
              </div>
            }
          </div>

          <br/>

          <div class="form-group">
            <button class="btn btn-primary btn-block" type="submit">
              Agregar comic
            </button>
          </div>

        </form>

      </div>
    </div>
  </div>
</div>
